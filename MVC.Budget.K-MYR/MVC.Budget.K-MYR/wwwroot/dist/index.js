"use strict";(self.webpackChunkthebudgeteer=self.webpackChunkthebudgeteer||[]).push([[57],{932:(e,t,a)=>{a.a(e,(async(e,t)=>{try{a(57),a(200),a(698);var n=a(737),d=e([n]);n=(d.then?(await d)():d)[0],t()}catch(e){t(e)}}))},737:(e,t,a)=>{a.a(e,(async(e,t)=>{try{var n=a(99),d=a(933),i=a(681),s=a(438),r=a(417),c=a(17);const b=document.getElementById("cards-container");E(),window.addEventListener("countryChanged",(()=>{E()}));const g=(0,d.Ck)();N();var l=await g,o=l.find((e=>"addFiscalPlan-modal"==e._element.id)),m=l.find((e=>"updateFiscalPlan-modal"==e._element.id)),u=document.getElementById("updateFiscalPlan-label"),f=document.getElementById("updateFiscalPlan_id"),v=document.getElementById("updateFiscalPlan_name"),w=l.find((e=>"deleteFiscalPlan-modal"==e._element.id)),h=document.getElementById("deleteFiscalPlan-label"),p=document.getElementById("deleteFiscalPlan_id");function E(){var e=c(".fiscalPlan-card");for(let t=0;t<e.length;t++){let a=e[t].dataset.id,n=document.getElementById(`fiscalPlan_income_${a}`);n.textContent=`${window.userNumberFormat.format(n.dataset.total)} / ${window.userNumberFormat.format(n.dataset.budget)}`;let d=document.getElementById(`fiscalPlan_expenses_${a}`);d.textContent=`${window.userNumberFormat.format(d.dataset.total)} / ${window.userNumberFormat.format(d.dataset.budget)}`}}function y(e,t){var a=document.createElement("div");a.className="fiscalPlan-card fading-in",a.id=`fiscalPlan-card_${e.id}`,a.setAttribute("data-id",e.id),a.setAttribute("data-name",e.name),a.tabIndex=0;var n=document.createElement("div");n.className="d-flex justify-content-between gap-1";var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 14 14"),d.setAttribute("height","30"),d.setAttribute("width","30"),d.setAttribute("class","fiscalPlan-icon"),d.setAttribute("fill","#ffffff"),d.setAttribute("data-action","edit"),d.tabIndex=0;var i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("href","#edit-icon"),d.appendChild(i);var s=document.createElement("h1");s.id=`fiscalPlan-header_${e.id}`,s.class="fiscalPlan-heading",s.textContent=e.name;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 14 14"),r.setAttribute("height","30"),r.setAttribute("width","30"),r.setAttribute("class","fiscalPlan-icon"),r.setAttribute("fill","#ffffff"),r.setAttribute("data-action","delete"),r.tabIndex=0;var c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#trash-icon"),r.appendChild(c),n.appendChild(d),n.appendChild(s),n.appendChild(r);var l=document.createElement("div");l.className="progress-container";var o=document.createElement("div"),m=document.createElement("div");m.className="d-flex justify-content-between";var u=document.createElement("div");u.textContent="Income";var f=document.createElement("div");f.className="text-end",f.id=`fiscalPlan_income_${e.id}`,f.textContent=`${window.userNumberFormat.format(0)} /  ${window.userNumberFormat.format(0)}`,m.appendChild(u),m.appendChild(f),o.appendChild(m);var v=document.createElement("div");v.className="progress";var w=document.createElement("div");w.className="progress-bar bg-success",w.setAttribute("role","progressbar"),w.style.width="100%",w.setAttribute("aria-valuenow","100"),w.setAttribute("aria-valuemin","0"),w.setAttribute("aria-valuemax","100"),w.setAttribute("aria-labelledby",`fiscalPlan_balance_${e.id}`),v.appendChild(w),o.appendChild(v);var h=document.createElement("div"),p=document.createElement("div");p.className="d-flex justify-content-between";var g=document.createElement("div");g.textContent="Expenses";var E=document.createElement("div");E.id=`fiscalPlan_expenses_${e.id}`,E.className="text-end",E.textContent=`${window.userNumberFormat.format(0)} /  ${window.userNumberFormat.format(0)}`,p.appendChild(g),p.appendChild(E),h.appendChild(p);var y=document.createElement("div");y.className="progress";var A=document.createElement("div");A.className="progress-bar bg-danger",A.setAttribute("role","progressbar"),A.style.width="100%",A.setAttribute("aria-valuenow","100"),A.setAttribute("aria-valuemin","0"),A.setAttribute("aria-valuemax","100"),A.setAttribute("aria-labelledby",`fiscalPlan_balance_${e.id}`),y.appendChild(A),h.appendChild(y),l.appendChild(o),l.appendChild(h),a.appendChild(n),a.appendChild(l),a.addEventListener("click",x),a.addEventListener("keydown",x),a.addEventListener("animationend",I),b.insertBefore(a,t)}function A(e){var t=e.get("Id"),a=e.get("Name");document.getElementById(`fiscalPlan-header_${t}`).textContent=a,document.getElementById(`fiscalPlan-card_${t}`).dataset.name=a}function C(e){var t=document.getElementById(`fiscalPlan-card_${e}`);t&&t.classList.add("fading-out")}async function P(){var e=document.getElementById("addFiscalPlan-card");document.getElementById("addFiscalPlan-form").addEventListener("submit",(async function(t){if(t.preventDefault(),o._isShown&&c(this).valid()){o.hide();var a=await(0,i.wM)(new FormData(this));a.isSuccess&&y(a.data,e),s.A.addMessage({text:a.message,iconId:a.isSuccess?"#check-icon":"#cross-icon"}),s.A.show()}})),e.addEventListener("click",(function(){o.show()})),e.addEventListener("keydown",(function(e){"Enter"==e.key&&o.show()})),document.getElementById("updateFiscalPlan-form").addEventListener("submit",(async function(e){if(e.preventDefault(),m._isShown&&c(this).valid()){m.hide();let e=new FormData(this),t=await(0,i.L8)(e);t.isSuccess&&A(e),s.A.addMessage({text:t.message,iconId:t.isSuccess?"#check-icon":"#cross-icon"}),s.A.show()}})),document.getElementById("deleteFiscalPlan-form").addEventListener("submit",(async function(e){if(e.preventDefault(),w._isShown){w.hide();var t=new FormData(this),a=t.get("Id"),n=t.get("__RequestVerificationToken"),d=await(0,i.l5)(a,n);d.isSuccess&&C(a),s.A.addMessage({text:d.message,iconId:d.isSuccess?"#check-icon":"#cross-icon"}),s.A.show()}})),b.querySelectorAll(".fiscalPlan-card").forEach((e=>{e.addEventListener("click",_),e.addEventListener("keydown",_)}))}function _(e){("click"===e.type||"keydown"===e.type&&"Enter"===e.key)&&x(e)}function x(e){var t=e.currentTarget,a=parseInt(t.dataset.id);if(e.target.matches(".fiscalPlan-icon"))switch(e.target.dataset.action){case"delete":h.textContent=`Delete '${t.dataset.name}'?`,p.value=a,w.show();break;case"edit":u.textContent=`Edit '${t.dataset.name}'`,f.value=a,v.value=t.dataset.name,m.show()}else window.location.href=n.d.FISCAL_PLAN(a)}function I(e){if("fading-out"===e.animationName){var t=e.currentTarget;t.removeEventListener("animationend",I),t.removeEventListener("click",x),t.removeEventListener("keydown",x),t.remove()}}async function N(){const e=(await Promise.all([a.e(699),a.e(441)]).then(a.t.bind(a,361,23))).default;return[...document.querySelectorAll(".tooltipped")].map((t=>new e(t,{container:"body",delay:{show:500,hide:0},placement:"top",offset:[0,10]})))}P(),(0,r.oF)(),t()}catch(F){t(F)}}),1)}},e=>{e.O(0,[279,22],(()=>(932,e(e.s=932)))),e.O()}]);