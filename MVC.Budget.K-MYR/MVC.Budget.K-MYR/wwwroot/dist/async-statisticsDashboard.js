"use strict";(self.webpackChunkthebudgeteer=self.webpackChunkthebudgeteer||[]).push([[413],{352:(t,a,e)=>{e.d(a,{default:()=>l});var r=e(501),s=e(417),d=e(933),n=e(681),i=e(438),o=e(17);r.Chart.register(r.A6,r.E8,r.PP,r.LinearScale,r.ZT,r.No,r.FN,r.ju,r.Bs,r.hE);class l{#t;#a;#e;#r;#s;#d;#n;#i;#o;#l;#h;constructor(t,a){this.#t=null,this.#c(t,a)}async#c(t,a){try{var e=this.#u();this.#l=document.getElementById("statistics-overspending"),this.#l.textContent=`Overspending: ${window.userNumberFormat.format(0)}`,this.#h=document.getElementById("statistics-totalSpent"),this.#h.textContent=`Total Spent: ${window.userNumberFormat.format(0)}`;var r=await this.#p(t,a);r.isSuccess&&(await e,this.#b(r.data),this.#t=r.data),this.#y(t,a),o(".yearPicker .calendar-button").on("click",(function(){let t=o(this).siblings(".yearSelector");t.data("datepicker").picker.is(":visible")?t.datepicker("hide"):t.datepicker("show")}))}finally{this.#a=!1}}async refresh(t,a){try{if(this.#a)return i.A.addAndShow("The dashboard is loading...","#info-icon"),!1;this.#a=!0;let e=await this.#p(t,a);e.isSuccess?this.#b(e.data):i.A.addAndShow(e.message,"#cross-icon")}finally{this.#a=!1}}async#p(t,a){return await(0,n.uB)(t,a)}formatDashboard(){try{if(this.#a)return i.A.addAndShow("The dashboard is loading...","#info-icon"),!1;this.#a=!0,this.#l.textContent=`Overspending: ${window.userNumberFormat.format(this.#t.overspendingTotal)}`,this.#h.textContent=`Total Spent: ${window.userNumberFormat.format(this.#t.totalSpent)}`,this.#d.update("none"),this.#n.update("none"),this.#i.update("none"),this.#o.update("none")}finally{this.#a=!1}}async#b(t){if(null==(t??this.#t))return!1;var a=[];this.#l.textContent=`Overspending: ${window.userNumberFormat.format(t.overspendingTotal)}`,this.#h.textContent=`Total Spent: ${window.userNumberFormat.format(t.totalSpent)}`,this.#r.data.datasets[0].data=[t.happyEvaluatedTotal,t.unhappyEvaluatedTotal,Number.MIN_VALUE],a.push(this.#C(this.#r)),this.#s.data.datasets[0].data=[t.necessaryEvaluatedTotal,t.unnecessaryEvaluatedTotal,Number.MIN_VALUE],a.push(this.#C(this.#s)),this.#d.data.datasets[0].data=t.happyPerMonth,this.#d.data.datasets[1].data=t.unhappyPerMonth,this.#d.data.datasets[2].data=t.happyEvaluatedPerMonth,this.#d.data.datasets[3].data=t.unhappyEvaluatedPerMonth,this.#d.data.datasets[4].data=t.unevaluatedPerMonth,a.push(this.#C(this.#d)),this.#n.data.datasets[0].data=t.necessaryPerMonth,this.#n.data.datasets[1].data=t.unnecessaryPerMonth,this.#n.data.datasets[2].data=t.necessaryEvaluatedPerMonth,this.#n.data.datasets[3].data=t.unnecessaryEvaluatedPerMonth,this.#n.data.datasets[4].data=t.unevaluatedPerMonth,a.push(this.#C(this.#n));var e=[];for(let a=0;a<t.monthlyOverspendingPerCategory.length;a++){let r=t.monthlyOverspendingPerCategory[a];e.push({label:r.category,data:r.overspendingPerMonth,borderWidth:2,borderColor:"#d3d3d3",backgroundColor:(0,s.oU)(a)})}this.#i.data.datasets=e,a.push(this.#C(this.#i)),this.#o.data.datasets[0].data=t.totalPerMonth,a.push(this.#C(this.#o)),await Promise.all(a),this.#t=t}async#y(t,a){this.#e=await(0,d.nz)("#statistics-yearSelector"),this.#e.datepicker("setDate",a.toISOString()),this.#e.on("changeDate",(async()=>{this.refresh(t,this.#e.datepicker("getUTCDate"))}))}async#u(){var t=[],a=[{label:"Total Amount",data:[0,0],backgroundColor:["rgb(25,135,84)","rgb(220,53,69)"],hoverOffset:4}],e={responsive:!0,layout:{padding:2},maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(t){let a=t.dataset.label||"";return a&&(a+=": "),null!==t.parsed&&(a+=window.userNumberFormat.format(t.parsed)),a}}}}},r={y:{border:{color:"#d3d3d3"},grid:{color:"#d3d3d3",lineWidth:.2},ticks:{color:"#d3d3d3",callback:function(t,a,e){return window.userNumberFormat.format(t)}}},x:{border:{color:"#d3d3d3"},grid:{display:!1,tickColor:"#d3d3d3"},ticks:{color:"#d3d3d3"}}};t.push(this.#g("sentimentChartYear",{type:"doughnut",data:{labels:["Happy","Unhappy"],datasets:a},options:e}).then((t=>this.#r=t))),t.push(this.#g("necessityChartYear",{type:"doughnut",data:{labels:["Necessary","Unnecessary"],datasets:a},options:e}).then((t=>this.#s=t)));var s={callbacks:{label:function(t){let a=t.dataset.label||"";return a&&(a+=": "),null!==t.parsed.y&&(a+=window.userNumberFormat.format(t.parsed.y)),a}}},d={...e,scales:r};d.plugins={emptypiechart:!1,tooltip:s},t.push(this.#g("sentimentBarChartYear",{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dez"],datasets:[{label:"Happy",stack:"Unevaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#20c997"},{label:"Unhappy",stack:"Unevaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"rgb(220,53,69)"},{label:"Happy (Eval.)",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#0f7c5c"},{label:"Unhappy (Eval.)",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#881d27"},{label:"Unevaluated",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#1c1c1c"}]},options:d}).then((t=>this.#d=t))),t.push(this.#g("necessityBarChartYear",{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dez"],datasets:[{label:"Necessary",stack:"Unevaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#20c997"},{label:"Unnecessary",stack:"Unevaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"rgb(220,53,69)"},{label:"Necessary (Eval.)",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#0f7c5c"},{label:"Unnecessary (Eval.)",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#881d27"},{label:"Unevaluated",stack:"Evaluated",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#1c1c1c"}]},options:d}).then((t=>this.#n=t))),t.push(this.#g("overspendingChart",{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dez"]},options:{plugins:{emptypiechart:!1,tooltip:s,title:{display:!0,text:"Monthly Overspending Per Category"}},responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{stacked:!0,border:{color:"#d3d3d3"},grid:{color:"#d3d3d3",lineWidth:.2},ticks:{color:"#d3d3d3",callback:function(t,a,e){return window.userNumberFormat.format(t)}}},y:{stacked:!0,border:{color:"#d3d3d3"},grid:{display:!1,tickColor:"#d3d3d3"},ticks:{color:"#d3d3d3"}}}}}).then((t=>this.#i=t))),t.push(this.#g("totalSpentChart",{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dez"],datasets:[{label:"Total Spent Per Month",borderWidth:2,borderColor:"#d3d3d3",backgroundColor:"#20c997"}]},options:d}).then((t=>this.#o=t))),await Promise.all(t)}#g(t,a){return new Promise((e=>{setTimeout((()=>{let s=new r.Chart(document.getElementById(t),a);e(s)}),0)}))}#C(t){return new Promise((()=>{setTimeout((()=>{t.update()}),0)}))}}}}]);